{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Homelab Docs","text":"CASEFILE INFRASTRUCTURE LODGES OPS Casefile Infrastructure Lodges Ops"},{"location":"#operation-lodge-cascade","title":"\ud83d\uddc2\ufe0f OPERATION LODGE CASCADE","text":"FEDERAL CASE FILE <p>Welcome, Agent.</p> <p>You are viewing the central dossier for The Lodge Homelab, a classified technology hub maintained deep within the Cascades.</p>"},{"location":"#case-no-199-xx-red-rm","title":"\ud83d\udd3b CASE NO. 199-XX-RED-RM","text":"<p>This file contains technical intelligence, infrastructure layouts, and field reports related to the Lodge digital network.</p> <p>Proceed with caution. Some documents may appear\u2026 altered by forces unknown.</p> Casefile Infrastructure Lodges Ops"},{"location":"#infrastructure","title":"\ud83d\udd27 Infrastructure","text":"<ul> <li>Infrastructure Overview</li> <li>Network Diagram</li> <li>DNS Operations</li> <li>Storage &amp; Backups</li> </ul> Casefile Infrastructure Lodges Ops"},{"location":"#the-lodges","title":"\ud83c\udfd4 The Lodges","text":"<ul> <li>Packard Sawmill</li> <li>The White Lodge</li> <li>The Black Lodge</li> </ul> Casefile Infrastructure Lodges Ops"},{"location":"#operations","title":"\ud83d\udce1 Operations","text":"<ul> <li>VPN Stack</li> <li>Cloudflare Operations</li> <li>Failover Cascade Model</li> </ul>"},{"location":"#additional-case-files","title":"\ud83d\udd0e Additional Case Files","text":"<ul> <li>Red Room Notes</li> <li>Owl Sightings</li> <li>Agent Briefings</li> </ul> <p>End of briefing.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/","title":"Secure Cloudflare Tunnel Access to Code-Server (pacard-sawmill)","text":"<p>This document outlines the full configuration used to expose <code>code-server</code> on pacard-sawmill securely over the internet using Cloudflare Tunnel and Cloudflare Zero Trust. This ensures maximum security, no LAN exposure, and MFA-protected access from anywhere.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#overview-2","title":"Overview-2","text":"<p>This setup provides:</p> <ul> <li>Secure remote access to code-server</li> <li>Zero Trust identity protection (email + MFA)</li> <li>No VPN required</li> <li>No ports opened on your home network</li> <li>code-server bound only to localhost for safety</li> <li>Cloudflare Tunnel handles all public traffic</li> </ul> <p>Traffic flow:</p> <pre><code>You \u2192 Cloudflare Zero Trust \u2192 Cloudflare Tunnel \u2192 pacard-sawmill \u2192 code-server\n</code></pre> <p>LAN access is intentionally disabled.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#1-install-cloudflared-on-pacard-sawmill","title":"1. Install cloudflared on pacard-sawmill","text":"<pre><code>curl -fsSL https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb -o cloudflared.deb\nsudo dpkg -i cloudflared.deb\n</code></pre> <p>Authenticate the instance:</p> <pre><code>cloudflared tunnel login\n</code></pre> <p>Choose the domain osirispc.com.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#2-create-the-tunnel","title":"2. Create the Tunnel","text":"<pre><code>cloudflared tunnel create pacard\n</code></pre> <p>This creates credentials:</p> <pre><code>/home/osirisortiz/.cloudflared/&lt;UUID&gt;.json\n</code></pre>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#3-configure-the-tunnel","title":"3. Configure the Tunnel","text":"<p>Create and edit the config:</p> <pre><code>sudo mkdir -p /etc/cloudflared\nsudo nano /etc/cloudflared/config.yml\n</code></pre> <p>Paste:</p> <pre><code>tunnel: pacard\ncredentials-file: /home/osirisortiz/.cloudflared/&lt;UUID&gt;.json\n\ningress:\n  - hostname: code.osirispc.com\n    service: http://127.0.0.1:8080\n  - service: http_status:404\n</code></pre> <p>Replace <code>&lt;UUID&gt;</code> accordingly.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#4-create-dns-route","title":"4. Create DNS Route","text":"<pre><code>cloudflared tunnel route dns pacard code.osirispc.com\n</code></pre> <p>This creates the necessary CNAME record.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#5-install-and-start-the-tunnel-service","title":"5. Install and Start the Tunnel Service","text":"<pre><code>sudo cloudflared service install\nsudo systemctl enable cloudflared\nsudo systemctl start cloudflared\n</code></pre> <p>Verify:</p> <pre><code>systemctl status cloudflared\n</code></pre> <p>Should show: Active (running).</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#6-secure-with-cloudflare-zero-trust","title":"6. Secure with Cloudflare Zero Trust","text":"<p>Navigate to:</p> <pre><code>Cloudflare Dashboard \u2192 Zero Trust \u2192 Access \u2192 Applications \u2192 Add Application\n</code></pre> <p>Select Self-hosted.</p> <p>Configure:</p> <ul> <li>Domain: <code>code.osirispc.com</code></li> <li>Name: Code Server</li> </ul> <p>Access policy:</p> <pre><code>Action: Allow\nSelector: Emails\nValue: osirisortizpc@gmail.com\n</code></pre> <p>This requires identity login + MFA before accessing code-server.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#7-configure-code-server-to-bind-locally-only","title":"7. Configure code-server to Bind Locally Only","text":"<p>File:</p> <pre><code>~/.config/code-server/config.yaml\n</code></pre> <p>Recommended:</p> <pre><code>auth: none\nbind-addr: 127.0.0.1:8080\ncert: false\n</code></pre> <p>Restart code-server:</p> <pre><code>pkill -f code-server\ncode-server\n</code></pre>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#8-final-behavior-summary","title":"8. Final Behavior Summary","text":""},{"location":"cloudflare/cloudflare-tunnel-code-server/#external-access-works","title":"External access (WORKS):","text":"<pre><code>https://code.osirispc.com\n</code></pre>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#local-machine-access-works","title":"Local machine access (WORKS):","text":"<pre><code>http://127.0.0.1:8080\n</code></pre>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#lan-access-blocked-intentionally","title":"LAN access (BLOCKED intentionally):","text":"<pre><code>http://192.168.199.177:8080\n</code></pre> <p>This is the expected Zero Trust behavior.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#optional-enable-lan-access-later","title":"Optional: Enable LAN Access Later","text":"<p>Change:</p> <pre><code>bind-addr: 0.0.0.0:8080\n</code></pre> <p>Restart code-server.</p> <p>LAN devices will now reach the service.</p>"},{"location":"cloudflare/cloudflare-tunnel-code-server/#result","title":"Result","text":"<p>You now have:</p> <ul> <li>A secure, MFA-protected Cloudflare Tunnel</li> <li>A globally accessible development environment</li> <li>Zero exposure on your LAN</li> <li>A professional Zero Trust setup</li> <li>Fully isolated code-server endpoint</li> </ul> <p>This configuration is ideal for a hardened, flexible, secure homelab.</p>"},{"location":"extra/briefings/","title":"Agent Briefings","text":"<p>High-level summaries for future you, future bosses, and any other cleared personnel.</p>"},{"location":"extra/owls/","title":"Owl Sightings","text":"<p>Document all unusual network or system behavior here.</p>"},{"location":"extra/red-room/","title":"Red Room Notes","text":"<p>Initial log. Further entries to be filed by Agent Ortiz.</p>"},{"location":"guides/mkdocs-dev-setup/","title":"\ud83c\udf32 1) How to Start the Dev Environment (Every Time)","text":"<p>Whenever you want to edit your Homelab Docs, do this:</p>"},{"location":"guides/mkdocs-dev-setup/#step-1-go-to-your-project","title":"\u2705 Step 1 \u2014 Go to your project","text":"<pre><code>cd ~/projects/homelab-docs\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#step-2-activate-your-virtual-environment","title":"\u2705 Step 2 \u2014 Activate your virtual environment","text":"<pre><code>source .venv/bin/activate\n</code></pre> <p>You should see:</p> <pre><code>(.venv)\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#step-3-start-mkdocs-with-live-reload-the-working-mode","title":"\u2705 Step 3 \u2014 Start MkDocs with live reload (the working mode)","text":"<pre><code>export MKDOCS_WATCH=1\nmkdocs serve -a 0.0.0.0:8002\n</code></pre> <p>This gives you:</p> <ul> <li>Dynamic updates</li> <li>Polling mode (solved your code-server issue)</li> <li>Instant reload</li> <li>Smooth editing</li> </ul>"},{"location":"guides/mkdocs-dev-setup/#your-site-is-now-live-at","title":"\ud83e\udded Your site is now live at:","text":"<pre><code>http://192.168.199.177:8002/\n</code></pre> <p>When you\u2019re done working:</p>"},{"location":"guides/mkdocs-dev-setup/#stop-the-server","title":"\u274c Stop the server","text":"<p>Just press:</p> <pre><code>CTRL + C\n</code></pre> <p>Done.</p>"},{"location":"guides/mkdocs-dev-setup/#2-homelab-docs-mkdocs-dev-environment-setup","title":"\ud83c\udf32 **2) Homelab Docs \u2013 MkDocs Dev Environment Setup","text":"<p>This page explains how to start the development server for the Homelab Docs project. Following these steps ensures live reload, correct file watching, and a clean workflow.</p>"},{"location":"guides/mkdocs-dev-setup/#1-navigate-to-the-project-directory","title":"1. Navigate to the Project Directory","text":"<pre><code>cd ~/projects/homelab-docs\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#2-activate-the-python-virtual-environment","title":"2. **Activate the Python Virtual Environment","text":"<pre><code>source .venv/bin/activate\n</code></pre> <p>Once activated, your prompt will show:</p> <pre><code>(.venv)\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#3-enable-polling-mode-required-for-code-server","title":"3. Enable Polling Mode (Required for code-server)","text":"<pre><code>export MKDOCS_WATCH=1\n</code></pre> <p>Polling mode ensures MkDocs correctly detects file changes when using code-server.</p>"},{"location":"guides/mkdocs-dev-setup/#4-start-the-mkdocs-development-server","title":"4. Start the MkDocs Development Server","text":"<pre><code>mkdocs serve -a 0.0.0.0:8002\n</code></pre> <p>The site will become available at:</p> <pre><code>http://192.168.199.177:8002/\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#5-stopping-the-server","title":"5. Stopping the Server","text":"<p>Press:</p> <pre><code>CTRL + C\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#notes","title":"Notes","text":""},{"location":"guides/mkdocs-dev-setup/#watch-setting-in-mkdocsyml","title":"Watch Setting in <code>mkdocs.yml</code>","text":"<p>This project requires a manual watch directive so MkDocs always tracks the correct folder:</p> <pre><code>watch:\n  - docs\n</code></pre>"},{"location":"guides/mkdocs-dev-setup/#why-we-use-polling-mode","title":"Why We Use Polling Mode","text":"<p>Because code-server writes files in a way that breaks standard file watchers, <code>MKDOCS_WATCH=1</code> forces MkDocs to use a reliable, polling-based watcher that never misses changes.</p>"},{"location":"guides/mkdocs-dev-setup/#thats-it","title":"That\u2019s it.","text":"<p>You now have a fully working development workflow for Homelab Docs.</p>"},{"location":"infra/dns-pihole-unbound/","title":"\ud83d\udcd8 Pi-hole + Unbound Deployment (Host Networking Mode)","text":"<p>A Lodge Infrastructure Case File</p>"},{"location":"infra/dns-pihole-unbound/#overview","title":"\ud83d\udcdd Overview","text":"<p>This document describes the complete setup of Pi-hole with Unbound running on an Ubuntu 24.04 virtual machine using Docker. This configuration gives you:</p> <ul> <li>Network-wide ad blocking</li> <li>Full recursive DNS (no 3rd-party DNS)</li> <li>Local hostname resolution</li> <li>High privacy</li> <li>Fast DNS caching</li> <li>Simple failover options</li> </ul> <p>Pi-hole operates in host networking mode for maximum reliability, while Unbound runs in a standard Docker bridge network (exposing port 5335).</p>"},{"location":"infra/dns-pihole-unbound/#architecture","title":"\ud83c\udfdb\ufe0f Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 Lodge Network (LAN)                    \u2502\n\u2502    Devices \u2192 192.168.199.53 (Pi-hole DNS Server)       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          Pi-hole (Docker, host networking)             \u2502\n\u2502  - Listens directly on host ports: 53, 80, 443, 123    \u2502\n\u2502  - Forwards DNS to Unbound at 127.0.0.1#5335           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Unbound (Docker bridge)                   \u2502\n\u2502        Listens on 0.0.0.0:5335 (TCP+UDP)               \u2502\n\u2502   Recursively queries the DNS root servers             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#vm-requirements","title":"\ud83d\udda5\ufe0f VM Requirements","text":"<ul> <li>Ubuntu Server 24.04 LTS</li> <li>Static IP:   192.168.199.53</li> <li>1 CPU / 1\u20132GB RAM minimum</li> <li>Docker installed</li> <li>UFW disabled or configured to allow DNS (port 53)</li> </ul>"},{"location":"infra/dns-pihole-unbound/#install-docker-docker-compose","title":"\ud83e\uddf0 Install Docker &amp; Docker Compose","text":"<pre><code>sudo apt update\nsudo apt install docker.io docker-compose -y\nsudo systemctl enable --now docker\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#directory-structure","title":"\ud83d\udce6 Directory Structure","text":"<p>Create the directory:</p> <pre><code>mkdir -p /opt/pihole\ncd /opt/pihole\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#docker-compose-file","title":"\ud83e\uddfe Docker Compose File","text":"<p>Create:</p> <pre><code>sudo nano /opt/pihole/docker-compose.yml\n</code></pre> <p>Paste:</p> <pre><code>version: \"3.3\"\n\nservices:\n  pihole:\n    container_name: pihole\n    image: pihole/pihole:latest\n    network_mode: host\n    environment:\n      TZ: \"America/New_York\"\n      WEBPASSWORD: \"admin\"\n      DNSMASQ_LISTENING: all\n    volumes:\n      - ./etc-pihole:/etc/pihole\n      - ./etc-dnsmasq.d:/etc/dnsmasq.d\n    restart: unless-stopped\n\n  unbound:\n    container_name: unbound\n    image: mvance/unbound:latest\n    ports:\n      - \"5335:53/tcp\"\n      - \"5335:53/udp\"\n    restart: unless-stopped\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#deployment","title":"\u25b6\ufe0f Deployment","text":"<p>Run:</p> <pre><code>cd /opt/pihole\nsudo docker-compose down\nsudo docker-compose up -d --force-recreate\n</code></pre> <p>Verify the containers:</p> <pre><code>docker ps\n</code></pre> <p>You should see:</p> <ul> <li>Pi-hole running and healthy</li> <li>Unbound running on port 5335</li> </ul>"},{"location":"infra/dns-pihole-unbound/#testing-dns","title":"\ud83e\uddea Testing DNS","text":"<p>Test recursion and forwarding:</p> <pre><code>dig @192.168.199.53 google.com\ndig @192.168.199.53 cloudflare.com\ndig @192.168.199.53 nasa.gov\n</code></pre> <p>Expected output:</p> <ul> <li><code>status: NOERROR</code></li> <li><code>ANSWER SECTION</code></li> <li>Times varying from 1ms (cached) to 100+ms (recursive)</li> </ul>"},{"location":"infra/dns-pihole-unbound/#pi-hole-configuration","title":"\u2699\ufe0f Pi-hole Configuration","text":"<p>Go to:</p> <pre><code>http://192.168.199.53/admin\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#upstream-dns","title":"Upstream DNS","text":"<p>Disable all upstream DNS providers.</p> <p>Add only:</p> <pre><code>127.0.0.1#5335\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#advanced-dns-settings","title":"Advanced DNS settings","text":"<p>Enable:</p> <ul> <li>\u2714 Listen on all interfaces</li> <li>\u2714 Never forward non-FQDNs</li> <li>\u2714 Never forward reverse lookups for private ranges</li> </ul>"},{"location":"infra/dns-pihole-unbound/#optional-conditional-forwarding","title":"\ud83c\udfe0 Optional: Conditional Forwarding","text":"<p>To resolve local device names:</p> <p>Settings \u2192 DNS \u2192 Conditional Forwarding</p> <ul> <li>Local network: <code>192.168.199.0/24</code></li> <li>Router IP: <code>192.168.199.1</code></li> <li>Local domain name: <code>lan</code></li> </ul>"},{"location":"infra/dns-pihole-unbound/#router-configuration","title":"\ud83d\udce1 Router Configuration","text":"<p>Point LAN DNS to:</p> <pre><code>192.168.199.53\n</code></pre> <p>All clients will now use Pi-hole \u2192 Unbound \u2192 Root DNS servers.</p>"},{"location":"infra/dns-pihole-unbound/#troubleshooting","title":"\ud83e\uddf0 Troubleshooting","text":""},{"location":"infra/dns-pihole-unbound/#connection-refused","title":"\u274c <code>connection refused</code>","text":"<p>Cause: Pi-hole not running in host networking OR port 53 in use.</p> <p>Fix:</p> <ul> <li>Ensure <code>network_mode: host</code> is present</li> <li>Restart Pi-hole</li> </ul>"},{"location":"infra/dns-pihole-unbound/#docker-proxy-appears-in-ss-output","title":"\u274c <code>docker-proxy</code> appears in ss output","text":"<p>Cause: Pi-hole using <code>ports:</code> mapping instead of host networking.</p> <p>Fix:</p> <ul> <li>Remove ALL <code>ports:</code> from Pi-hole config</li> <li>Redeploy containers</li> </ul>"},{"location":"infra/dns-pihole-unbound/#unbound-not-responding","title":"\u274c Unbound not responding","text":"<p>Check port:</p> <pre><code>dig @127.0.0.1 -p 5335 google.com\n</code></pre> <p>If no response:</p> <ul> <li>Unbound container not ready</li> <li>Port blocked</li> <li>Container crashed</li> </ul>"},{"location":"infra/dns-pihole-unbound/#pi-hole-not-resolving-lan-hostnames","title":"\u274c Pi-hole not resolving LAN hostnames","text":"<p>Enable Conditional Forwarding OR add host records in:</p> <pre><code>/etc/pihole/custom.list\n</code></pre>"},{"location":"infra/dns-pihole-unbound/#summary","title":"\ud83e\udded Summary","text":"<p>You now have:</p> <ul> <li>Full DNS privacy</li> <li>No 3rd-party upstream DNS</li> <li>Root-level recursion</li> <li>Fast caching</li> <li>Pi-hole running natively at host network speed</li> </ul> <p>A clean, secure, resilient Lodge DNS system.</p> <p>If you'd like an advanced version of this doc with:</p> <p>\ud83d\udd27 Hardening (DNSSEC, QNAME minimization, root anchors) \ud83d\udcca Grafana dashboards \ud83d\udd25 High availability (2nd Pi-hole) \ud83d\udce6 GitHub-ready SOP version \ud83d\udd3a Twin Peaks\u2013themed version</p> <p>Just say the word.</p>"},{"location":"infra/network-baseline/","title":"Network Baseline","text":""},{"location":"infra/network-baseline/#network-baseline-pi-hole-1-configuration-operational-as-of-nov-16-2025","title":"Network Baseline: Pi-hole 1 Configuration (Operational as of Nov 16, 2025)","text":""},{"location":"infra/network-baseline/#overview","title":"\ud83e\udde9 Overview","text":"<p>Pi-hole 1 (192.168.199.53) is now operating as the primary DNS server for the network. The secondary DNS has been left as Cloudflare (1.1.1.1) temporarily for redundancy during observation.</p>"},{"location":"infra/network-baseline/#router-dhcp-configuration-tp-link","title":"\ud83c\udf10 Router DHCP Configuration (TP-Link)","text":"<p>DHCP Server: Enabled IP Address Pool: <code>192.168.199.99 \u2013 192.168.199.201</code> Address Lease Time: 120 minutes Default Gateway: <code>192.168.199.1</code> Primary DNS: <code>192.168.199.53</code> (Pi-hole 1) Secondary DNS: <code>1.1.1.1</code> (Cloudflare, temporary fallback)</p>"},{"location":"infra/network-baseline/#pi-hole-1-details","title":"\ud83e\udde0 Pi-hole 1 Details","text":"<ul> <li>Status: Running normally</li> <li>IP Address: <code>192.168.199.53</code></li> <li>Role: Primary DNS server for LAN</li> <li>Container health: Healthy (FTL process active)</li> <li>DNS test results: Successful resolution via <code>nslookup google.com 192.168.199.53</code></li> </ul>"},{"location":"infra/network-baseline/#monitoring-instructions-48-hour-observation","title":"\ud83d\udd75\ufe0f Monitoring Instructions (48-hour observation)","text":"<ol> <li>UI \u2192 Query Log: Confirm steady traffic and minimal \u201cretried\u201d queries.</li> <li>UI \u2192 Tools \u2192 Network: Verify active client list is populating.</li> <li>From any LAN host:</li> </ol> <p><code>bash    nslookup cloudflare.com 192.168.199.53</code></p> <ul> <li>Should return valid IPv4/IPv6 results quickly.</li> <li>If browsing stalls:</li> </ul> <p><code>bash    pihole -t</code></p> <ul> <li>Use this to tail real-time logs and confirm query flow.</li> </ul>"},{"location":"infra/network-baseline/#next-steps-after-stability-confirmed","title":"\ud83e\udeb6 Next Steps (after stability confirmed)","text":"<p>Once Pi-hole 1 proves stable:</p> <ul> <li>Deploy new Unbound server on a clean VM (not <code>.139</code>).</li> <li>Integrate Pi-hole 1 with that Unbound for recursive resolution.</li> <li>Remove Cloudflare fallback (1.1.1.1) to enforce full DNS filtering.</li> </ul>"},{"location":"infra/network-baseline/#next-change-procedure-switching-to-recursive-unbound","title":"\u2699\ufe0f Next Change Procedure: Switching to Recursive Unbound","text":"<ol> <li>Deploy Unbound Container:</li> </ol> <p><code>bash    docker run -d --name unbound \\      -p 5335:5335/tcp \\      -p 5335:5335/udp \\      -v /opt/unbound/etc:/etc/unbound \\      --restart unless-stopped \\      mvance/unbound:latest</code></p> <ol> <li>Update Pi-hole Upstream DNS in UI:    Go to Settings \u2192 DNS \u2192 Upstream DNS Servers and set:</li> </ol> <p><code>Custom 1 (IPv4): 127.0.0.1#5335</code></p> <ol> <li> <p>Disable Cloudflare Fallback:    Remove <code>1.1.1.1</code> from your router\u2019s DHCP config.</p> </li> <li> <p>Verify with dig/nslookup:</p> </li> </ol> <p><code>bash    dig google.com @127.0.0.1 -p 5335</code></p> <p>If that resolves, Unbound is active.</p> <ol> <li>Reboot Clients or Flush DNS:</li> </ol> <p><code>bash    ipconfig /flushdns   # Windows    sudo systemd-resolve --flush-caches  # Linux</code></p> <ol> <li>Monitor Logs:</li> </ol> <p><code>bash    docker logs -f unbound    pihole -t</code></p> <p>Once Unbound has stable recursion, log the new baseline as Phase 2: Recursive DNS.</p>"},{"location":"infra/network-baseline/#current-state-summary","title":"\u2705 Current State Summary","text":"Component IP Address Role Status TP-Link Router 192.168.199.1 Gateway &amp; DHCP Active Pi-hole 1 192.168.199.53 Primary DNS Operational Cloudflare 1.1.1.1 Secondary DNS (Fallback) Enabled <p>Documented by Agent Osiris \u2013 maintained in the Lodge Systems Logbook</p>"},{"location":"infra/network-diagram/","title":"Network Diagram","text":"EVIDENCE <p>nav:   - Home: index.md</p> <ul> <li> <p>Infrastructure:</p> <ul> <li>Overview: infra/overview.md</li> <li>Network Diagram: infra/network-diagram.md</li> <li>Storage &amp; Backups: infra/storage-backups.md</li> <li>Automation &amp; Workflows: infra/automation.md</li> </ul> </li> <li> <p>Servers:</p> <ul> <li>Pacard Sawmill: servers/pacard-sawmill.md</li> <li>Gordon Cole: servers/gordon-cole.md</li> <li>Bookhouse: servers/bookhouse.md</li> <li>Blockbuster: servers/blockbuster.md</li> <li>RARR (Media Server): servers/rarr.md</li> <li>DNS Gateway (VM 198): servers/dns-gateway.md</li> <li>The White Lodge (PVE Node): servers/thewhitelodge.md</li> <li>The Black Lodge (PVE Node): servers/theblacklodge.md</li> <li>The Red Room (PVE Node / PBS): servers/theredroom.md</li> </ul> </li> <li> <p>Applications:</p> <ul> <li>Media:<ul> <li>Jellyfin: apps/jellyfin.md</li> <li>Radarr: apps/radarr.md</li> <li>Sonarr: apps/sonarr.md</li> <li>Prowlarr: apps/prowlarr.md</li> <li>qBittorrent (VPN): apps/qbittorrent.md</li> <li>Xteve / TVHeadend: apps/xteve-tvheadend.md</li> </ul> </li> <li>Books:<ul> <li>Readarr: apps/readarr.md</li> <li>Kavita: apps/kavita.md</li> <li>Audiobookshelf: apps/audiobookshelf.md</li> </ul> </li> <li>Networking &amp; DNS:<ul> <li>Pi-hole: apps/pihole.md</li> <li>Unbound: apps/unbound.md</li> <li>WireGuard: apps/wireguard.md</li> </ul> </li> <li>Infrastructure Apps:<ul> <li>Portainer: apps/portainer.md</li> <li>Nginx Proxy Manager: apps/npm.md</li> <li>Homepage Dashboard: apps/homepage.md</li> <li>Flame Dashboard: apps/flame.md</li> </ul> </li> </ul> </li> <li> <p>Cloudflare:</p> <ul> <li>Tunnel for Code-Server: cloudflare/cloudflare-tunnel-code-server.md</li> <li>Future Tunnels: cloudflare/tunnels.md</li> </ul> </li> <li> <p>Guides:</p> <ul> <li>Container Deployment SOP: guides/container-deploy.md</li> <li>VM Creation SOP: guides/vm-create.md</li> <li>Network Troubleshooting: guides/network-troubleshoot.md</li> <li>Backup &amp; Restore SOP: guides/backup-restore.md</li> </ul> </li> </ul> <p>Important: Mermaid diagrams only work inside triple backticks ```mermaid</p>"},{"location":"infra/network-diagram/#3-make-sure-its-in-the-navigation-mkdocsyml","title":"\u2705 3. Make sure it\u2019s in the navigation (mkdocs.yml)","text":"<p>You already have:</p> <p>```yaml   - Infrastructure:       - Overview: infra/overview.md       - Network Diagram: infra/network-diagram.md</p>"},{"location":"infra/overview/","title":"Overview","text":"<ul> <li> <p>Home: index.md</p> </li> <li> <p>Infrastructure:</p> <ul> <li>Overview: infra/overview.md</li> <li>Network Diagram: infra/network-diagram.md</li> <li>Storage &amp; Backups: infra/storage-backups.md</li> <li>Automation &amp; Workflows: infra/automation.md</li> </ul> </li> <li> <p>Servers:</p> <ul> <li>Pacard Sawmill: servers/pacard-sawmill.md</li> <li>Gordon Cole: servers/gordon-cole.md</li> <li>Bookhouse: servers/bookhouse.md</li> <li>Blockbuster: servers/blockbuster.md</li> <li>RARR (Media Server): servers/rarr.md</li> <li>DNS Gateway (VM 198): servers/dns-gateway.md</li> <li>The White Lodge (PVE Node): servers/thewhitelodge.md</li> <li>The Black Lodge (PVE Node): servers/theblacklodge.md</li> <li>The Red Room (PVE Node / PBS): servers/theredroom.md</li> </ul> </li> <li> <p>Applications:</p> <ul> <li>Media:<ul> <li>Jellyfin: apps/jellyfin.md</li> <li>Radarr: apps/radarr.md</li> <li>Sonarr: apps/sonarr.md</li> <li>Prowlarr: apps/prowlarr.md</li> <li>qBittorrent (VPN): apps/qbittorrent.md</li> <li>Xteve / TVHeadend: apps/xteve-tvheadend.md</li> </ul> </li> <li>Books:<ul> <li>Readarr: apps/readarr.md</li> <li>Kavita: apps/kavita.md</li> <li>Audiobookshelf: apps/audiobookshelf.md</li> </ul> </li> <li>Networking &amp; DNS:<ul> <li>Pi-hole: apps/pihole.md</li> <li>Unbound: apps/unbound.md</li> <li>WireGuard: apps/wireguard.md</li> </ul> </li> <li>Infrastructure Apps:<ul> <li>Portainer: apps/portainer.md</li> <li>Nginx Proxy Manager: apps/npm.md</li> <li>Homepage Dashboard: apps/homepage.md</li> <li>Flame Dashboard: apps/flame.md</li> </ul> </li> </ul> </li> <li> <p>Cloudflare:</p> <ul> <li>Tunnel for Code-Server: cloudflare/cloudflare-tunnel-code-server.md</li> <li>Future Tunnels: cloudflare/tunnels.md</li> </ul> </li> <li> <p>Guides:</p> <ul> <li>Container Deployment SOP: guides/container-deploy.md</li> <li>VM Creation SOP: guides/vm-create.md</li> <li>Network Troubleshooting: guides/network-troubleshoot.md</li> <li>Backup &amp; Restore SOP: guides/backup-restore.md</li> </ul> </li> </ul>"},{"location":"servers/packard-sawmill/","title":"pacard-sawmill","text":"<p>Role: Development server / code-server host OS: Ubuntu 24.04 LTS (VM) Primary IP: 192.168.199.177 Status: Active</p>"},{"location":"servers/packard-sawmill/#overview","title":"Overview","text":"<p>pacard-sawmill serves as the main development environment for internal and external projects. It runs code-server, Docker, and several MkDocs documentation sites.</p>"},{"location":"servers/packard-sawmill/#key-services","title":"Key Services","text":"<ul> <li>code-server (<code>code.osirispc.com</code> via Cloudflare Tunnel)</li> <li>Portainer Agent (port 9001)</li> <li>Homelab Docs (<code>homelab-docs</code> auto-commit + watcher)</li> <li>Docker-based development containers</li> </ul>"},{"location":"servers/packard-sawmill/#maintenance-notes","title":"Maintenance Notes","text":"<ul> <li>Automatic updates via <code>unattended-upgrades</code></li> <li>Auto-commit logs rotate every 50 lines</li> <li>Watched in real-time by <code>homelab-autocommit.service</code></li> <li>Backups planned for sync to <code>theowlcave</code> NAS</li> </ul>"},{"location":"servers/packard-sawmill/#recent-changes","title":"Recent Changes","text":"<p>Last update: {{ date }}</p>"},{"location":"servers/theblacklodge/","title":"theblacklodge","text":"<p>Role: Secondary Proxmox Node (Backup / mirror media server) OS: Debian 12 (bookworm) Primary IP: 192.168.199.101 Status: Active (standby replication node)</p>"},{"location":"servers/theblacklodge/#overview","title":"Overview","text":"<p>The Black Lodge acts as the failover counterpart to The White Lodge. It mirrors media libraries, configurations, and snapshots via ZFS and rsync. When The White Lodge goes dark, The Black Lodge assumes its identity temporarily.</p>"},{"location":"servers/theblacklodge/#key-services","title":"Key Services","text":"<ul> <li>Jellyfin (standby configuration)</li> <li>RARR stack (backup, disabled by default)</li> <li>Rsync mirror target for <code>/mnt/data/movies</code> and <code>/mnt/data/shows</code></li> <li>Portainer Agent for container control</li> </ul>"},{"location":"servers/theblacklodge/#maintenance-notes","title":"Maintenance Notes","text":"<ul> <li>Receives media and config sync via <code>lodge-mirror.sh</code></li> <li>Keeps ZFS snapshots aligned daily</li> <li>Does not delete missing files (append-only sync)</li> <li>PBS handles local and offsite backups</li> </ul>"},{"location":"servers/theblacklodge/#failover-plan","title":"Failover Plan","text":"<p>During failover, The Black Lodge mounts the mirrored datasets and starts the Jellyfin container. Cloudflare DNS may be updated manually or via Keepalived floating IP for continuity.</p>"},{"location":"servers/theblacklodge/#recent-changes","title":"Recent Changes","text":"<p>Last update: {{ date }}</p>"},{"location":"servers/thewhitelodge/","title":"thewhitelodge","text":"<p>Role: Primary Proxmox Node OS: Debian 12 (bookworm) Primary IP: 192.168.199.100  Status: Active</p>"},{"location":"servers/thewhitelodge/#overview","title":"Overview","text":"<p>The White Lodge hosts several vm's.  The main RARR stack: Radarr, Sonarr, Jellyfin, qBittorrent, and Gluetun.  It serves as the production media hub for the network and the primary sync source for The Black Lodge.</p>"},{"location":"servers/thewhitelodge/#key-services","title":"Key Services","text":"<ul> <li>Jellyfin (Movies, Shows, Trailers)</li> <li>Radarr, Sonarr, Prowlarr, Jellyseerr</li> <li>qBittorrent with VPN via Gluetun</li> <li>ZFS dataset for <code>/mnt/data/movies</code> and <code>/mnt/data/shows</code></li> </ul>"},{"location":"servers/thewhitelodge/#maintenance-notes","title":"Maintenance Notes","text":"<ul> <li>ZFS snapshots replicate to The Black Lodge  </li> <li>Synced nightly using <code>lodge-mirror.sh</code> </li> <li>Backed up via Proxmox Backup Server  </li> <li>Config stored in <code>/mnt/data/configs/</code></li> </ul>"},{"location":"servers/thewhitelodge/#failover-plan","title":"Failover Plan","text":"<p>In the event of downtime, The Black Lodge takes over via manual ZFS replication and Jellyfin restore. Rsync ensures latest metadata and libraries are mirrored.</p>"},{"location":"servers/thewhitelodge/#recent-changes","title":"Recent Changes","text":"<p>Last update: {{ date }}</p>"}]}